---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
	const news = await getCollection('news');
	return news.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const { title, description, pubDate, image } = entry.data;
const formattedDate = new Intl.DateTimeFormat('ru-RU', {
	year: 'numeric',
	month: 'long',
	day: 'numeric'
}).format(pubDate);
---

<BaseLayout title={`${title} - ISP Provider`} description={description}>
	<Header />
	
	<main>
		<article class="news-article">
			<div class="container">
				<div class="news-article__header">
					<a href="/news" class="news-article__back">← Назад к новостям</a>
					<div class="news-article__date">{formattedDate}</div>
					<h1 class="news-article__title">{title}</h1>
					{image && (
						<div class="news-article__image">
							<img src={image} alt={title} />
						</div>
					)}
				</div>
				<div class="news-article__content">
					<Content />
				</div>
			</div>
		</article>
	</main>

	<Footer />
</BaseLayout>

<style>
	.news-article {
		padding: 4rem 0;
	}

	.news-article__header {
		max-width: 800px;
		margin: 0 auto 3rem;
	}

	.news-article__back {
		display: inline-block;
		color: #4a9eff;
		text-decoration: none;
		margin-bottom: 1rem;
		transition: color 0.3s;
	}

	.news-article__back:hover {
		color: #357abd;
	}

	.news-article__date {
		color: #666;
		font-size: 0.9rem;
		margin-bottom: 1rem;
	}

	.news-article__title {
		font-size: 2.5rem;
		margin-bottom: 2rem;
		color: #1a1a2e;
		line-height: 1.2;
	}

	.news-article__image {
		width: 100%;
		height: 400px;
		overflow: hidden;
		border-radius: 10px;
		margin-bottom: 2rem;
	}

	.news-article__image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.news-article__content {
		max-width: 800px;
		margin: 0 auto;
		line-height: 1.8;
		color: #333;
	}

	.news-article__content :global(h2) {
		font-size: 2rem;
		margin-top: 2rem;
		margin-bottom: 1rem;
		color: #1a1a2e;
	}

	.news-article__content :global(h3) {
		font-size: 1.5rem;
		margin-top: 1.5rem;
		margin-bottom: 0.75rem;
		color: #1a1a2e;
	}

	.news-article__content :global(p) {
		margin-bottom: 1.5rem;
	}

	.news-article__content :global(ul),
	.news-article__content :global(ol) {
		margin-bottom: 1.5rem;
		padding-left: 2rem;
	}

	.news-article__content :global(li) {
		margin-bottom: 0.5rem;
	}

	.news-article__content :global(a) {
		color: #4a9eff;
		text-decoration: none;
	}

	.news-article__content :global(a:hover) {
		text-decoration: underline;
	}

	@media (max-width: 768px) {
		.news-article {
			padding: 2rem 0;
		}

		.news-article__title {
			font-size: 2rem;
		}

		.news-article__image {
			height: 250px;
		}
	}
</style>

