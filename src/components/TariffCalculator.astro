---
---

<div class="bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md" x-data="{
	speed: 100,
	price: 500,
	tariffs: [
		{ speed: 50, price: 300, name: 'Базовый' },
		{ speed: 100, price: 500, name: 'Стандарт' },
		{ speed: 200, price: 800, name: 'Премиум' },
		{ speed: 500, price: 1200, name: 'Максимум' },
		{ speed: 1000, price: 2000, name: 'Ультра' }
	],
	selectedTariff: null,
	selectTariff(tariff) {
		this.selectedTariff = tariff;
		this.speed = tariff.speed;
		this.price = tariff.price;
	},
	calculatePrice() {
		const tariff = this.tariffs.find(t => t.speed === this.speed);
		if (tariff) {
			this.price = tariff.price;
			this.selectedTariff = tariff;
		} else {
			// Интерполяция для промежуточных значений
			for (let i = 0; i < this.tariffs.length - 1; i++) {
				if (this.speed >= this.tariffs[i].speed && this.speed < this.tariffs[i + 1].speed) {
					const ratio = (this.speed - this.tariffs[i].speed) / 
						(this.tariffs[i + 1].speed - this.tariffs[i].speed);
					this.price = Math.round(
						this.tariffs[i].price + 
						(this.tariffs[i + 1].price - this.tariffs[i].price) * ratio
					);
					break;
				}
			}
		}
	}
}">
	<h2 class="mt-0 mb-8 text-[#1a1a2e] dark:text-white">Калькулятор тарифов</h2>
	<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
		<div>
			<h3 class="mb-4 text-gray-800 dark:text-gray-200">Выберите тариф</h3>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-4">
				<template x-for="tariff in tariffs" :key="tariff.speed">
					<button
						@click="selectTariff(tariff)"
						:class="selectedTariff && selectedTariff.speed === tariff.speed ? 'border-[#4a9eff] bg-blue-50 dark:bg-blue-900/30' : 'border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700'"
						class="p-6 border-2 rounded-lg cursor-pointer transition-all text-center hover:border-[#4a9eff] hover:-translate-y-0.5 hover:shadow-lg"
					>
						<div class="font-bold text-lg mb-2 text-[#1a1a2e] dark:text-white" x-text="tariff.name"></div>
						<div class="text-sm text-gray-600 dark:text-gray-300 mb-2" x-text="tariff.speed + ' Мбит/с'"></div>
						<div class="text-xl font-bold text-[#4a9eff]" x-text="tariff.price + ' ₽/мес'"></div>
					</button>
				</template>
			</div>
		</div>
		<div class="flex flex-col gap-8">
			<div>
				<label for="speed" class="block mb-4 text-gray-700 dark:text-gray-300 font-medium">Скорость: <span x-text="speed"></span> Мбит/с</label>
				<input 
					type="range" 
					id="speed"
					min="50"
					max="1000"
					step="10"
					x-model="speed"
					@input="calculatePrice()"
					class="w-full h-2 rounded-md bg-gray-200 outline-none appearance-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#4a9eff] [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-[#4a9eff] [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none"
				/>
			</div>
			<div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg">
				<div class="flex justify-between mb-4">
					<span class="text-gray-600 dark:text-gray-300">Скорость:</span>
					<span class="font-bold text-[#1a1a2e] dark:text-white" x-text="speed + ' Мбит/с'"></span>
				</div>
				<div class="flex justify-between">
					<span class="text-gray-600 dark:text-gray-300">Стоимость:</span>
					<span class="text-2xl font-bold text-[#4a9eff]" x-text="price + ' ₽/мес'"></span>
				</div>
			</div>
		</div>
	</div>
</div>
