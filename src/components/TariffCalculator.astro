---
---

<div class="tariff-calculator" x-data="{
	speed: 100,
	price: 500,
	tariffs: [
		{ speed: 50, price: 300, name: 'Базовый' },
		{ speed: 100, price: 500, name: 'Стандарт' },
		{ speed: 200, price: 800, name: 'Премиум' },
		{ speed: 500, price: 1200, name: 'Максимум' },
		{ speed: 1000, price: 2000, name: 'Ультра' }
	],
	selectedTariff: null,
	selectTariff(tariff) {
		this.selectedTariff = tariff;
		this.speed = tariff.speed;
		this.price = tariff.price;
	},
	calculatePrice() {
		const tariff = this.tariffs.find(t => t.speed === this.speed);
		if (tariff) {
			this.price = tariff.price;
			this.selectedTariff = tariff;
		} else {
			// Интерполяция для промежуточных значений
			for (let i = 0; i < this.tariffs.length - 1; i++) {
				if (this.speed >= this.tariffs[i].speed && this.speed < this.tariffs[i + 1].speed) {
					const ratio = (this.speed - this.tariffs[i].speed) / 
						(this.tariffs[i + 1].speed - this.tariffs[i].speed);
					this.price = Math.round(
						this.tariffs[i].price + 
						(this.tariffs[i + 1].price - this.tariffs[i].price) * ratio
					);
					break;
				}
			}
		}
	}
}">
	<h2>Калькулятор тарифов</h2>
	<div class="calculator-content">
		<div class="tariff-selector">
			<h3>Выберите тариф</h3>
			<div class="tariff-cards">
				<template x-for="tariff in tariffs" :key="tariff.speed">
					<button
						@click="selectTariff(tariff)"
						:class="{ 'active': selectedTariff && selectedTariff.speed === tariff.speed }"
						class="tariff-card"
					>
						<div class="tariff-name" x-text="tariff.name"></div>
						<div class="tariff-speed" x-text="tariff.speed + ' Мбит/с'"></div>
						<div class="tariff-price" x-text="tariff.price + ' ₽/мес'"></div>
					</button>
				</template>
			</div>
		</div>
		<div class="calculator-controls">
			<div class="form-group">
				<label for="speed">Скорость: <span x-text="speed"></span> Мбит/с</label>
				<input 
					type="range" 
					id="speed"
					min="50"
					max="1000"
					step="10"
					x-model="speed"
					@input="calculatePrice()"
				/>
			</div>
			<div class="result">
				<div class="result-item">
					<span class="result-label">Скорость:</span>
					<span class="result-value" x-text="speed + ' Мбит/с'"></span>
				</div>
				<div class="result-item">
					<span class="result-label">Стоимость:</span>
					<span class="result-value price" x-text="price + ' ₽/мес'"></span>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.tariff-calculator {
		background: white;
		padding: 2rem;
		border-radius: 10px;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	}

	.tariff-calculator h2 {
		margin-top: 0;
		margin-bottom: 2rem;
		color: #1a1a2e;
	}

	.calculator-content {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 2rem;
	}

	.tariff-selector h3 {
		margin-bottom: 1rem;
		color: #333;
	}

	.tariff-cards {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
		gap: 1rem;
	}

	.tariff-card {
		padding: 1.5rem;
		border: 2px solid #e0e0e0;
		border-radius: 8px;
		background: white;
		cursor: pointer;
		transition: all 0.3s;
		text-align: center;
	}

	.tariff-card:hover {
		border-color: #4a9eff;
		transform: translateY(-2px);
		box-shadow: 0 4px 8px rgba(74, 158, 255, 0.2);
	}

	.tariff-card.active {
		border-color: #4a9eff;
		background: #f0f7ff;
	}

	.tariff-name {
		font-weight: bold;
		font-size: 1.1rem;
		margin-bottom: 0.5rem;
		color: #1a1a2e;
	}

	.tariff-speed {
		font-size: 0.9rem;
		color: #666;
		margin-bottom: 0.5rem;
	}

	.tariff-price {
		font-size: 1.2rem;
		font-weight: bold;
		color: #4a9eff;
	}

	.calculator-controls {
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

	.form-group label {
		display: block;
		margin-bottom: 1rem;
		color: #333;
		font-weight: 500;
	}

	.form-group input[type="range"] {
		width: 100%;
		height: 8px;
		border-radius: 5px;
		background: #e0e0e0;
		outline: none;
		-webkit-appearance: none;
	}

	.form-group input[type="range"]::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 20px;
		height: 20px;
		border-radius: 50%;
		background: #4a9eff;
		cursor: pointer;
	}

	.form-group input[type="range"]::-moz-range-thumb {
		width: 20px;
		height: 20px;
		border-radius: 50%;
		background: #4a9eff;
		cursor: pointer;
		border: none;
	}

	.result {
		background: #f8f9fa;
		padding: 1.5rem;
		border-radius: 8px;
	}

	.result-item {
		display: flex;
		justify-content: space-between;
		margin-bottom: 1rem;
	}

	.result-item:last-child {
		margin-bottom: 0;
	}

	.result-label {
		color: #666;
	}

	.result-value {
		font-weight: bold;
		color: #1a1a2e;
	}

	.result-value.price {
		font-size: 1.5rem;
		color: #4a9eff;
	}

	@media (max-width: 968px) {
		.calculator-content {
			grid-template-columns: 1fr;
		}

		.tariff-cards {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	@media (max-width: 768px) {
		.tariff-calculator {
			padding: 1.5rem;
		}

		.tariff-cards {
			grid-template-columns: 1fr;
		}
	}
</style>

